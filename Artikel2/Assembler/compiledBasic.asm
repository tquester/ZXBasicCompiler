
CBASIC_START
compiledBasic:
	call ZXHeapClear
	LD (runtimeSaveSP),SP
; 		1000.1  CLS 
	CALL runtimeCls
ZXBASIC_LINE_1010:
; 1010  GO SUB 1050
; 		1010.1  GO SUB 1050{00 00 1a 04 00 }
	CALL runtimeCheckBreak
	CALL ZXBASIC_LINE_1050
ZXBASIC_LINE_1020:
; 1020  GOTO 1350
; 		1020.1  GOTO 1350{00 00 46 05 00 }
	CALL runtimeCheckBreak
	JP ZXBASIC_LINE_1350
ZXBASIC_LINE_1030:
; 1030  REM  SUB psycho
ZXBASIC_LINE_1040:
; 1040  REM  -----------
ZXBASIC_LINE_1050:
; 1050  LET rounds=10
; 		1050.1  LET rounds=10{00 00 0a 00 00 }
	LD HL,10
	LD (ZXBASIC_VAR_rounds),HL
ZXBASIC_LINE_1060:
; 1060  LET rounds=200
; 		1060.1  LET rounds=200{00 00 c8 00 00 }
	LD HL,200
	LD (ZXBASIC_VAR_rounds),HL
ZXBASIC_LINE_1070:
; 1070  PRINT  AT 0,15;"psychodelic";
; 		1070.1  PRINT  AT 0{00 00 00 00 00 },15{00 00 0f 00 00 };"psychodelic";
	LD A,2
	CALL $1601	;Open Channel
	LD A,(ZX_P_FLAG)
	PUSH AF
	LD DE,0
	LD HL,15
	CALL runtimePrintAt
	LD HL,STRING_0	;psychodelic
	CALL runtimePrintString
	POP AF
	LD (ZX_P_FLAG),A
ZXBASIC_LINE_1080:
; 1080  LET color=0
; 		1080.1  LET color=0{00 00 00 00 00 }
	LD HL,0
	LD (ZXBASIC_VAR_color),HL
ZXBASIC_LINE_1090:
; 1090  FOR k=1 TO rounds
; 		1090.1  FOR k=1{00 00 01 00 00 } TO rounds
	CALL runtimeCheckBreak
	LD HL,1
	LD (ZXBASIC_VAR_k),HL
	LD HL,(ZXBASIC_VAR_rounds)
	LD (ZXBASIC_VAR_for_k),HL
FOR_0:
ZXBASIC_LINE_1100:
; 1100  PRINT  AT 0,0;k
; 		1100.1  PRINT  AT 0{00 00 00 00 00 },0{00 00 00 00 00 };k
	LD A,2
	CALL $1601	;Open Channel
	LD A,(ZX_P_FLAG)
	PUSH AF
	LD DE,0
	LD HL,0
	CALL runtimePrintAt
	LD HL,(ZXBASIC_VAR_k)
	CALL runtimePrintInt
	CALL runtimePrintNewline
	POP AF
	LD (ZX_P_FLAG),A
ZXBASIC_LINE_1110:
; 1110  FOR j=1 TO 11
; 		1110.1  FOR j=1{00 00 01 00 00 } TO 11{00 00 0b 00 00 }
	CALL runtimeCheckBreak
	LD HL,1
	LD (ZXBASIC_VAR_j),HL
	LD HL,11
	LD (ZXBASIC_VAR_for_j),HL
FOR_1:
ZXBASIC_LINE_1120:
; 1120  LET PROCbox0=color*8: LET PROCbox1=j: GO SUB 1200
; 		1120.1  LET PROCbox0=color*8{00 00 08 00 00 }
	LD DE,(ZXBASIC_VAR_color)
	LD HL,8
; *
	call runtimeMult16bit
	LD (ZXBASIC_VAR_PROCbox0),HL
; 		1120.2  LET PROCbox1=j
	LD HL,(ZXBASIC_VAR_j)
	LD (ZXBASIC_VAR_PROCbox1),HL
; 		1120.3  GO SUB 1200{00 00 b0 04 00 }
	CALL runtimeCheckBreak
	CALL ZXBASIC_LINE_1200
ZXBASIC_LINE_1130:
; 1130  LET color=color+1
; 		1130.1  LET color=color+1{00 00 01 00 00 }
	LD HL,(ZXBASIC_VAR_color)
	INC HL
; +
	LD (ZXBASIC_VAR_color),HL
ZXBASIC_LINE_1140:
; 1140  IF color=9 THEN  LET color=0
; 		1140.1  IF color=9{00 00 09 00 00 } THEN  LET color=0{00 00 00 00 00 }
	LD DE,(ZXBASIC_VAR_color)
	LD HL,9
; =
	CALL runtimeCmpHLEqDE
	LD A,L
	CP 0
	JP Z,ZXB_LABEL_1
; 		1140.2  LET color=0{00 00 00 00 00 }
	LD HL,0
	LD (ZXBASIC_VAR_color),HL
ZXB_LABEL_1:
ZXBASIC_LINE_1150:
; 1150  NEXT j
; 		1150.1  NEXT j
	CALL runtimeCheckBreak
	LD HL,(ZXBASIC_VAR_j)
	INC HL
	LD (ZXBASIC_VAR_j),HL
	LD DE,(ZXBASIC_VAR_for_j)
	EX HL,DE
	SUB HL,DE
	JP NC,FOR_1
ZXBASIC_LINE_1160:
; 1160  NEXT k
; 		1160.1  NEXT k
	CALL runtimeCheckBreak
	LD HL,(ZXBASIC_VAR_k)
	INC HL
	LD (ZXBASIC_VAR_k),HL
	LD DE,(ZXBASIC_VAR_for_k)
	EX HL,DE
	SUB HL,DE
	JP NC,FOR_0
ZXBASIC_LINE_1170:
; 1170  RETURN 
; 		1170.1  RETURN 
	CALL runtimeCheckBreak
	RET
ZXBASIC_LINE_1180:
; 1180  REM  SUB box(0=atr, 1=ofs)
ZXBASIC_LINE_1190:
; 1190  REM  ----------------------
ZXBASIC_LINE_1200:
; 1200  LET adr=22528+PROCbox1*32
; 		1200.1  LET adr=22528{00 00 00 58 00 }+PROCbox1*32{00 00 20 00 00 }
	LD HL,22528
	PUSH HL
	LD DE,(ZXBASIC_VAR_PROCbox1)
	LD HL,32
; *
	call runtimeMult16bit
; +
	POP DE
	ADD HL,DE
	LD (ZXBASIC_VAR_adr),HL
ZXBASIC_LINE_1210:
; 1210  LET temp=adr
; 		1210.1  LET temp=adr
	LD HL,(ZXBASIC_VAR_adr)
	LD (ZXBASIC_VAR_temp),HL
ZXBASIC_LINE_1220:
; 1220  FOR i=PROCbox1 TO 32-PROCbox1
; 		1220.1  FOR i=PROCbox1 TO 32{00 00 20 00 00 }-PROCbox1
	CALL runtimeCheckBreak
	LD HL,(ZXBASIC_VAR_PROCbox1)
	LD (ZXBASIC_VAR_i),HL
	LD HL,32
	LD DE,(ZXBASIC_VAR_PROCbox1)
; -
	SUB HL,DE
	LD (ZXBASIC_VAR_for_i),HL
FOR_2:
ZXBASIC_LINE_1230:
; 1230  POKE adr+i,PROCbox0
; 		1230.1  POKE adr+i,PROCbox0
	LD DE,(ZXBASIC_VAR_adr)
	LD HL,(ZXBASIC_VAR_i)
; +
	ADD HL,DE
	LD DE,(ZXBASIC_VAR_PROCbox0)
	LD (HL),E
ZXBASIC_LINE_1240:
; 1240  NEXT i
; 		1240.1  NEXT i
	CALL runtimeCheckBreak
	LD HL,(ZXBASIC_VAR_i)
	INC HL
	LD (ZXBASIC_VAR_i),HL
	LD DE,(ZXBASIC_VAR_for_i)
	EX HL,DE
	SUB HL,DE
	JP NC,FOR_2
ZXBASIC_LINE_1250:
; 1250  LET adr=adr+32
; 		1250.1  LET adr=adr+32{00 00 20 00 00 }
	LD DE,(ZXBASIC_VAR_adr)
	LD HL,32
; +
	ADD HL,DE
	LD (ZXBASIC_VAR_adr),HL
ZXBASIC_LINE_1260:
; 1260  FOR i=1 TO 23-PROCbox1*2
; 		1260.1  FOR i=1{00 00 01 00 00 } TO 23{00 00 17 00 00 }-PROCbox1*2{00 00 02 00 00 }
	CALL runtimeCheckBreak
	LD HL,1
	LD (ZXBASIC_VAR_i),HL
	LD HL,23
	PUSH HL
	LD DE,(ZXBASIC_VAR_PROCbox1)
	LD HL,2
; *
	call runtimeMult16bit
; -
	POP DE
	EX HL,DE
	SUB HL,DE
	LD (ZXBASIC_VAR_for_i),HL
FOR_3:
ZXBASIC_LINE_1270:
; 1270  POKE adr+PROCbox1,PROCbox0
; 		1270.1  POKE adr+PROCbox1,PROCbox0
	LD DE,(ZXBASIC_VAR_adr)
	LD HL,(ZXBASIC_VAR_PROCbox1)
; +
	ADD HL,DE
	LD DE,(ZXBASIC_VAR_PROCbox0)
	LD (HL),E
ZXBASIC_LINE_1280:
; 1280  POKE adr+32-PROCbox1,PROCbox0
; 		1280.1  POKE adr+32{00 00 20 00 00 }-PROCbox1,PROCbox0
	LD DE,(ZXBASIC_VAR_adr)
	LD HL,32
; +
	ADD HL,DE
	LD DE,(ZXBASIC_VAR_PROCbox1)
; -
	SUB HL,DE
	LD DE,(ZXBASIC_VAR_PROCbox0)
	LD (HL),E
ZXBASIC_LINE_1290:
; 1290  LET adr=adr+32
; 		1290.1  LET adr=adr+32{00 00 20 00 00 }
	LD DE,(ZXBASIC_VAR_adr)
	LD HL,32
; +
	ADD HL,DE
	LD (ZXBASIC_VAR_adr),HL
ZXBASIC_LINE_1300:
; 1300  NEXT i
; 		1300.1  NEXT i
	CALL runtimeCheckBreak
	LD HL,(ZXBASIC_VAR_i)
	INC HL
	LD (ZXBASIC_VAR_i),HL
	LD DE,(ZXBASIC_VAR_for_i)
	EX HL,DE
	SUB HL,DE
	JP NC,FOR_3
ZXBASIC_LINE_1310:
; 1310  FOR i=PROCbox1 TO 32-PROCbox1
; 		1310.1  FOR i=PROCbox1 TO 32{00 00 20 00 00 }-PROCbox1
	CALL runtimeCheckBreak
	LD HL,(ZXBASIC_VAR_PROCbox1)
	LD (ZXBASIC_VAR_i),HL
	LD HL,32
	LD DE,(ZXBASIC_VAR_PROCbox1)
; -
	SUB HL,DE
	LD (ZXBASIC_VAR_for_i),HL
FOR_4:
ZXBASIC_LINE_1320:
; 1320  POKE adr+i,PROCbox0
; 		1320.1  POKE adr+i,PROCbox0
	LD DE,(ZXBASIC_VAR_adr)
	LD HL,(ZXBASIC_VAR_i)
; +
	ADD HL,DE
	LD DE,(ZXBASIC_VAR_PROCbox0)
	LD (HL),E
ZXBASIC_LINE_1330:
; 1330  NEXT i
; 		1330.1  NEXT i
	CALL runtimeCheckBreak
	LD HL,(ZXBASIC_VAR_i)
	INC HL
	LD (ZXBASIC_VAR_i),HL
	LD DE,(ZXBASIC_VAR_for_i)
	EX HL,DE
	SUB HL,DE
	JP NC,FOR_4
ZXBASIC_LINE_1340:
; 1340  RETURN 
; 		1340.1  RETURN 
	CALL runtimeCheckBreak
	RET
ZXBASIC_LINE_1350:
; 1350  STOP \000
ZXBASIC_VAR_PROCbox0:	dw 0
ZXBASIC_VAR_PROCbox1:	dw 0
ZXBASIC_VAR_adr:	dw 0
ZXBASIC_VAR_color:	dw 0
ZXBASIC_VAR_for_i:	dw 0
ZXBASIC_VAR_for_j:	dw 0
ZXBASIC_VAR_for_k:	dw 0
ZXBASIC_VAR_i:	dw 0
ZXBASIC_VAR_j:	dw 0
ZXBASIC_VAR_k:	dw 0
ZXBASIC_VAR_rounds:	dw 0
ZXBASIC_VAR_temp:	dw 0
STRING_0:	dw 11
	db	"psychodelic"

ZX_VARIABLES:
	db 0

    DISPLAY "Compiled Basic = ", /D, $-CBASIC_START,  " bytes"
